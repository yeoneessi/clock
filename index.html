<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clock Widget</title>
    <style>
      :root {
        /* 위젯 테마 */
        --bg: #0b0f19;
        --card: rgba(255, 255, 255, 0.08);
        --border: rgba(255, 255, 255, 0.14);
        --text: rgba(255, 255, 255, 0.92);
        --subtext: rgba(255, 255, 255, 0.68);
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);

        /* 사이즈 */
        --radius: 16px;
        --pad: 18px;

        /* 폰트 */
        --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Noto Sans KR, Apple SD Gothic Neo, "Malgun Gothic", sans-serif;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        font-family: var(--font);
        background: transparent; /* 노션 배경에 자연스럽게 */
      }

      .wrap {
        min-height: 100%;
        display: grid;
        place-items: center;
        padding: 12px;
      }

      .card {
        width: min(520px, 100%);
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: var(--pad);
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .top-row {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 12px;
      }

      .title {
        font-size: 14px;
        letter-spacing: 0.2px;
        color: var(--subtext);
      }

      .tz {
        font-size: 12px;
        color: var(--subtext);
        border: 1px solid var(--border);
        padding: 6px 10px;
        border-radius: 999px;
      }

      .time {
        margin-top: 14px;
        font-size: clamp(40px, 7vw, 64px);
        font-weight: 700;
        letter-spacing: -0.5px;
        color: var(--text);
        line-height: 1.1;
        font-variant-numeric: tabular-nums;
      }

      .date {
        margin-top: 8px;
        font-size: 14px;
        color: var(--subtext);
      }

      .footer {
        margin-top: 14px;
        display: flex;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
      }

      .pill {
        font-size: 12px;
        color: var(--subtext);
        border: 1px solid var(--border);
        padding: 6px 10px;
        border-radius: 999px;
      }

      /* 라이트 모드 자동 대응 */
      @media (prefers-color-scheme: light) {
        :root {
          --card: rgba(0, 0, 0, 0.05);
          --border: rgba(0, 0, 0, 0.12);
          --text: rgba(0, 0, 0, 0.88);
          --subtext: rgba(0, 0, 0, 0.62);
          --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="card" role="group" aria-label="현재 시간 위젯">
        <div class="top-row">
          <div class="title">현재 시간</div>
          <div class="tz" id="tz-pill">Asia/Seoul</div>
        </div>

        <div class="time" id="time">--:--:--</div>
        <div class="date" id="date">----</div>

        <div class="footer">
          <div class="pill" id="weekday-pill">요일</div>
          <div class="pill" id="ampm-pill">AM/PM</div>
        </div>
      </div>
    </div>

    <script>
      // 설정: 원하는 타임존/표기 변경 가능
      const CONFIG = {
        timeZone: "Asia/Seoul",
        hour12: true, // 24시간제로 바꾸려면 false
        showSeconds: true,
        locale: "ko-KR",
      };

      const $time = document.getElementById("time");
      const $date = document.getElementById("date");
      const $weekday = document.getElementById("weekday-pill");
      const $ampm = document.getElementById("ampm-pill");
      const $tz = document.getElementById("tz-pill");

      $tz.textContent = CONFIG.timeZone;

      function pad2(n) {
        return String(n).padStart(2, "0");
      }

      function getParts(date) {
        // Intl로 타임존 적용 + 안정적으로 파트 분해
        const timeFormatter = new Intl.DateTimeFormat(CONFIG.locale, {
          timeZone: CONFIG.timeZone,
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
          hour12: CONFIG.hour12,
        });

        const dateFormatter = new Intl.DateTimeFormat(CONFIG.locale, {
          timeZone: CONFIG.timeZone,
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
        });

        const weekdayFormatter = new Intl.DateTimeFormat(CONFIG.locale, {
          timeZone: CONFIG.timeZone,
          weekday: "long",
        });

        const timeParts = timeFormatter.formatToParts(date);
        const hour = timeParts.find((p) => p.type === "hour")?.value ?? "--";
        const minute =
          timeParts.find((p) => p.type === "minute")?.value ?? "--";
        const second =
          timeParts.find((p) => p.type === "second")?.value ?? "--";
        const dayPeriod =
          timeParts.find((p) => p.type === "dayPeriod")?.value ?? "";

        const dateText = dateFormatter.format(date);
        const weekdayText = weekdayFormatter.format(date);

        return { hour, minute, second, dayPeriod, dateText, weekdayText };
      }

      function render() {
        const now = new Date();
        const { hour, minute, second, dayPeriod, dateText, weekdayText } =
          getParts(now);

        const timeText = CONFIG.showSeconds
          ? `${hour}:${minute}:${second}`
          : `${hour}:${minute}`;

        $time.textContent = timeText;
        $date.textContent = dateText;
        $weekday.textContent = weekdayText;

        // hour12가 false면 AM/PM 숨김 느낌으로 처리
        if (CONFIG.hour12) {
          $ampm.textContent = dayPeriod || "AM/PM";
          $ampm.style.display = "inline-flex";
        } else {
          $ampm.style.display = "none";
        }
      }

      // 초 단위로 깔끔하게 갱신(드리프트 방지)
      function startTick() {
        render();
        const now = new Date();
        const msToNextSecond = 1000 - now.getMilliseconds();
        setTimeout(() => {
          render();
          setInterval(render, 1000);
        }, msToNextSecond);
      }

      startTick();
    </script>
  </body>
</html>
